(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{38:function(e,t,n){},58:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(29),s=n.n(a),o=(n(38),n(11)),u=n(3),i=n(10),j=n.n(i),b=n(13),l=n(9),p=n(14),O=n.n(p),h=(n(58),n(66)),d=n(1);var f=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),u=s[0],i=s[1],p=Object(c.useState)(""),f=Object(l.a)(p,2),x=f[0],g=f[1],v=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new Headers).append("Content-Type","text/plain"),c={username:u,password:x},e.next=6,O.a.post("http://localhost:4000/auth/login",c,{headers:n});case 6:a=e.sent,localStorage.setItem("token",JSON.stringify(a.data)),r(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(h.a,{className:"App",children:[Object(d.jsx)("h1",{children:"Login"}),!n&&Object(d.jsxs)("form",{onSubmit:v,children:[Object(d.jsx)("input",{onChange:function(e){return i(e.target.value)},value:u,type:"text",placeholder:"Email"}),Object(d.jsx)("input",{onChange:function(e){return g(e.target.value)},value:x,type:"password",placeholder:"Contrase\xf1a"}),Object(d.jsx)("button",{type:"submit",children:"Login"})]}),Object(d.jsx)(o.b,{to:"/get-users",children:"Ir a ver usuarios"})]})};var x=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=7;break}return n=JSON.parse(t),c=n.jwt,e.next=5,O.a.get("http://localhost:4000/users",{headers:{Authorization:"Bearer "+c}});case 5:a=e.sent,r(a.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)(h.a,{className:"App",children:[Object(d.jsx)("h1",{children:"Usuarios"}),Object(d.jsxs)("div",{children:[0===n.length&&Object(d.jsx)("div",{children:"No tienes permisos suficientes"}),n.length>0&&n.map((function(e){return Object(d.jsx)("div",{children:JSON.stringify(e)})}))]})]})},g=n(15),v=n(32),m=function(e){var t=e.component,n=Object(v.a)(e,["component"]),r=Object(c.useState)(null),a=Object(l.a)(r,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");o(!!e)}),[]),null===s?Object(d.jsx)(d.Fragment,{}):Object(d.jsx)(u.b,Object(g.a)(Object(g.a)({},n),{},{render:function(e){return s?Object(d.jsx)(t,Object(g.a)({},e)):Object(d.jsx)(u.a,{to:"/"})}}))};function S(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{exact:!0,path:"/",component:f}),Object(d.jsx)(m,{path:"/get-users",component:x})]})})}var w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root")),w()}},[[65,1,2]]]);
//# sourceMappingURL=main.3ace088b.chunk.js.map